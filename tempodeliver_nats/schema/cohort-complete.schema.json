{
    "$schema": "http://json-schema.org/draft-07/schema",
    "title": "cohort complete",
    "description": "Validate cohort complete NATS message",
    "type": "object",
    "properties": {
        "cohortId": {
            "type": "string",
            "description": "Cohort identifier"
            
        },
        "timestamp": {
            "type": "string",
            "description": "Date of when the MAF analysis completed (YYYY-MM-DD HH:MM)",
            "pattern": "^\\d{4}\\-(0?[1-9]|1[012])\\-(0?[1-9]|[12][0-9]|3[01]) ([01][0-9]|2[0-3]):[0-5][0-9]$"
        },
        "type":{
            "type": "string",
            "description": "Date of when the MAF analysis completed (YYYY-MM-DD)",
            "enum":["investigator","MSKWESRP","operational"]
        },
        "analyst":{
            "type":"array",
            "description":"Analysts with access to the sample via cohorts",
            "items": {
                 "type": "string"
            }
        },
        "samples":{
            "type":"array",
            "description": "List of paired tumors in the cohort",
            "items": {
                 "type": "object",
                 "properties": {
                     "primaryId": {
                         "type":"string",
                         "description": "Stable tumor sample identifier",
                         "pattern": "^\\d{5}_(?:[A-Z]*_)?\\d*$"

                     },
                     "normal_primaryId": {
                         "type":"string",
                         "description": "Stable normal sample identifier",
                         "pattern": "^\\d{5}_(?:[A-Z]*_)?\\d*$"
                     }
                 },
                 "required":["primaryId","normal_primaryId"]
            },
            "uniqueItems": true
        },
        "status": {
            "type": "string",
            "description": "Status of TEMPO workflow completion.",
            "enum": ["PASS","FAIL"]
        }
    },
    "required":["cohortId","timestamp","type","samples","analyst","status"]
}
